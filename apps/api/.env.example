# =============================================================================
# REQUIRED - Database & JWT
# =============================================================================

# Database connection (local development with docker-compose.dev.yml)
DATABASE_URL="postgresql://postgres:postgres@localhost:6205/synjar_dev?schema=public"

# JWT configuration (change in production!)
JWT_SECRET="dev-jwt-secret-change-in-production-min-32-chars-required"
JWT_EXPIRES_IN="15m"

# =============================================================================
# REQUIRED - External Services (get your keys)
# =============================================================================

# OpenAI API (required for embeddings)
# Get your key: https://platform.openai.com/api-keys
OPENAI_API_KEY="sk-proj-your-key-here"
OPENAI_ORG_ID="org-your-org-here"

# Backblaze B2 Storage (or any S3-compatible)
# Sign up: https://www.backblaze.com/b2/sign-up.html
B2_KEY_ID="your-key-id"
B2_APPLICATION_KEY="your-application-key"
B2_BUCKET_NAME="your-bucket-name"
B2_ENDPOINT="s3.eu-central-003.backblazeb2.com"

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Server
PORT=6200
NODE_ENV=development
CORS_ORIGINS="http://localhost:6200,http://localhost:6210,http://localhost:5173"

# Limits
MAX_FILE_SIZE_MB=50
MAX_STORAGE_GB=1
MAX_DOCUMENTS=1000

# =============================================================================
# ENTERPRISE FEATURES (optional)
# =============================================================================

# Set to 'true' to enable enterprise modules (@synjar/enterprise)
ENABLE_ENTERPRISE=false

# Enterprise License (required when ENABLE_ENTERPRISE=true)
# LICENSE_KEY="eyJhbGciOiJSUzI1NiIs..."
# LICENSE_SERVER_URL="https://license.synjar.com"

# =============================================================================
# DUAL-MODE REGISTRATION
# =============================================================================

# Deployment Mode
# - 'cloud': Multi-tenant SaaS with email verification required
# - 'self-hosted': Single-tenant, first user = admin, invitation-only
# Leave uncommented for local development (works out-of-box with Mailpit)
DEPLOYMENT_MODE=self-hosted

# Email Verification URL (Frontend)
# Used in verification emails - points to your frontend verify page
EMAIL_VERIFICATION_URL=http://localhost:6210/auth/verify

# Admin Contact (Self-Hosted Mode)
# Email shown to blocked users when registration is disabled
ADMIN_EMAIL=admin@yourcompany.com

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# Local Development (with docker-compose.dev.yml Mailpit)
# These settings work out-of-box with Mailpit - no changes needed!
# View emails at: http://localhost:6203
SMTP_HOST=localhost
SMTP_PORT=6202
SMTP_SECURE=false
SMTP_FROM_EMAIL=noreply@synjar.local
SMTP_FROM_NAME=Synjar Dev

# Production SMTP (uncomment and configure for production)
# Gmail example (use App Password):
#   SMTP_HOST=smtp.gmail.com
#   SMTP_PORT=587
#   SMTP_SECURE=false
#   SMTP_USER=your@gmail.com
#   SMTP_PASSWORD=your-app-specific-password
#
# SendGrid:
#   SMTP_HOST=smtp.sendgrid.net
#   SMTP_PORT=587
#   SMTP_SECURE=false
#   SMTP_USER=apikey
#   SMTP_PASSWORD=SG.your_sendgrid_api_key
#
# Mailgun:
#   SMTP_HOST=smtp.mailgun.org
#   SMTP_PORT=587
#   SMTP_SECURE=false
#   SMTP_USER=postmaster@mg.yourcompany.com
#   SMTP_PASSWORD=your-mailgun-smtp-password

# =============================================================================
# SECURITY - Rate Limiting
# =============================================================================

# TTL in milliseconds (60000 = 1 minute)
THROTTLE_TTL=60000

# Rate limits per TTL window
THROTTLE_LIMIT_REGISTER=3    # 3 registration attempts per minute
THROTTLE_LIMIT_LOGIN=5       # 5 login attempts per minute
THROTTLE_LIMIT_RESEND=1      # 1 resend verification per minute

# Grace Period (Cloud Mode Only)
# Time in minutes that new unverified users can explore the platform
GRACE_PERIOD_MINUTES=15

# =============================================================================
# CLOUD MODE - Stripe Integration (optional)
# =============================================================================

# Uncomment to enable Cloud mode with Stripe billing
# STRIPE_SECRET_KEY=sk_test_your_stripe_key_here
# STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
